<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Custom Label Fonts • BarnebyLives</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Custom Label Fonts">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BarnebyLives</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Custom Label Fonts</h1>
            
      

      <div class="d-none name"><code>custom_label_fonts.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Obviously, everyone wants to be able to customize their label
templates! Why go through the bother of installing and running
<code>BarnebyLives</code> if you cannot do that!</p>
<p>Note that the labels are made using LaTeX, an awesome guide for LaTeX
(relevant to the level you will be using it at) is <a href="https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes" class="external-link">Overleaf.org</a>,
and check the links in the side bar too!</p>
<p>In this vignette we will replace the default LaTeX fonts with add-on
fonts using the <code>fontspec</code> package. Also note that previously
you <em>may</em> have been able to scrape by using any old LaTeX
installation, at this point you will definitely need to make sure you
have either XelaTex for lualatext installed. ‘tinytex’ which is
installable directly from R should accomplish this on all operating
systems.</p>
<p>This vignette assumes you were able to get through
<code>Custom Label Templates</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tinytex"</span><span class="op">)</span></span>
<span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/install_tinytex.html" class="external-link">install_tinytex</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>You can check that you have successfully installed this with</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tinytex</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tinytex/man/is_tinytex.html" class="external-link">is_tinytex</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you are on linux for the sake of compatibility for this vignette,
please install a ton of Windows fonts. It seems most of these are on Mac
- but if you start hitting errors, maybe give this a go.</p>
<p>You can do this with the code below, which will give part of your
soul to Bill Gates of yesteryear.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true"</span> <span class="kw">|</span> <span class="fu">sudo</span> debconf-set-selections</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">sudo</span> apt install <span class="at">-y</span> ttf-mscorefonts-installer</span></code></pre></div>
<p>or you can</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">sudo</span> apt install ttf-mscorefonts-installer</span></code></pre></div>
<p>and then click <code>tab</code> and <code>enter</code> on your
keyboard when the debconf pops up to accept that you are giving Bill
Gates of yesteryear your soul.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">fc-list</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">"Times New Roman"</span></span></code></pre></div>
<p>and doubly verify the Tex install can access them</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">sudo</span> fc-cache <span class="at">-fv</span></span></code></pre></div>
<p>You may get messages about loops, these are fine as long as the last
line reads something like</p>
<p><code>fc-cache: succeeded</code></p>
</div>
<div class="section level2">
<h2 id="prepare-workspace">Prepare workspace<a class="anchor" aria-label="anchor" href="#prepare-workspace"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sagesteppe.github.io/BarnebyLives/">BarnebyLives</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">local</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">'~'</span>, <span class="st">'Documents'</span>, <span class="st">'assoRted'</span>, <span class="st">'Barneby_Lives_dev'</span>, <span class="st">'LabelStyles'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">l.nevadense</span> <span class="op">&lt;-</span> <span class="va">collection_examples</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Collection_number</span> <span class="op">==</span> <span class="fl">2823</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Project_name <span class="op">=</span> <span class="st">'Custom Fonts'</span>, </span>
<span>    Coordinate_uncertainty <span class="op">=</span> <span class="st">'5m'</span></span>
<span>    <span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">l.nevadense</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">local</span>, <span class="st">'SoS-ExampleCollection.csv'</span><span class="op">)</span>, row.names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p>All of the labels can be copied from their original locations using
the following code.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p2lib</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">'BarnebyLives'</span><span class="op">)</span>,</span>
<span>  <span class="st">'rmarkdown'</span>, <span class="st">'templates'</span>, <span class="st">'labels'</span>, <span class="st">'skeleton'</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># here we copy over one of the skeletons which we are going to modify in this example</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">p2lib</span>, <span class="st">'skeleton-customfont.Rmd'</span><span class="op">)</span>, </span>
<span>  to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">local</span>, <span class="st">'skeleton-customfont.Rmd'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">p2lib</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="render-labels">Render Labels<a class="anchor" aria-label="anchor" href="#render-labels"></a>
</h2>
<p>If you look at the header on this file, you’ll notice it has more
going on than the other skeletons. As you will likely end up wanting to
merge multiple label components together into a single skeleton
(eventually), be sure to use this as the preamble.</p>
<pre><code>output: 
  pdf_document:
    latex_engine: xelatex # or lualatex
    keep_text: true
params:
  Collection_number: Collection_number
geometry: paperheight=4in,paperwidth=4in,margin=0.1in
header-includes:
  - \pagenumbering{gobble}
  - \usepackage{setspace}
  - \usepackage{fontspec}
  - \setmainfont{Georgia}</code></pre>
<p>Note that the last line in the preamble is: this is the command
‘setmainfont’ to set the font ‘Georgia’ which will be used.</p>
</div>
<div class="section level2">
<h2 id="examples-with-common-fonts">Examples with Common Fonts<a class="anchor" aria-label="anchor" href="#examples-with-common-fonts"></a>
</h2>
<div class="float">
<img src="../reference/figures/custom-font2823.png" alt="One custom Fonts"><div class="figcaption">One custom Fonts</div>
</div>
<p>However, we can use multiple fonts (…if so desired… ) by importing an
additional font, and specifying where we should use it.</p>
<pre><code>output: 
  ...
header-includes:
  ...
  - \usepackage{fontspec}
  - \setmainfont{Georgia}
  - \newfontfamily\couriernew{Courier New}</code></pre>
<p>And edit portions of the skeletons body</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>...</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>\textcouriernew{<span class="st">`</span><span class="at">r writer(data[['Habitat']])</span><span class="st">`</span>. <span class="st">`</span><span class="at">r data[['physical_environ']]</span><span class="st">`</span>}</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>Veg.<span class="sc">:</span> <span class="st">`</span><span class="at">r species_font(record[['Vegetation']])</span><span class="st">`</span> <span class="st">`</span><span class="at">r associates_writer(record[['Associates']])</span><span class="st">`</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="st">`</span><span class="at">r writer(record[['Notes']])</span><span class="st">`</span>  </span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>\endgroup</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>...</span></code></pre></div>
<div class="float">
<img src="../reference/figures/custom-twofonts2823.png" alt="Two custom Fonts"><div class="figcaption">Two custom Fonts</div>
</div>
<p>But! Notice that this new font is applied to the <em>whole</em> group
not just the braced contents, you can bypass this with custom macros -
which we won’t discuss or support in this package. TBH I’m not sure how
often you should really have two fonts per label anyways…</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Reed Clark Benkendorf.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Preparing to use BarnebyLives! • BarnebyLives</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preparing to use BarnebyLives!">
<meta name="description" content="How to download and configure taxonomic and geographic datasets required for a working BarnebyLives instance.">
<meta property="og:description" content="How to download and configure taxonomic and geographic datasets required for a working BarnebyLives instance.">
<meta property="og:image" content="https://sagesteppe.github.io/BarnebyLives/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BarnebyLives</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../data-sources.html">Alternative Data Sources</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Preparing to use BarnebyLives!</h1>
            
            <h4 data-toc-skip class="date">2025-10-26</h4>
      

      <div class="d-none name"><code>setting_up_files.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette walks you through five steps:<br>
- 1) Download taxonomic data (2-10 minutes, ~500MiB)<br>
- 2) Download geographic data (a couple hours depending on extent)<br>
- 3) Set up the instance (15-45 minutes processing) - 4) Verify
success</p>
<p>System requirements: - Stable internet connection for downloads -
4-20 GB available disk space (varies by geographic extent) - however the
temporary objects, i.e. after downloading but before running
<code>data_setup</code> will require significantly more memory. - R
version ≥ 4.0.0</p>
<p>You only need to do this once before using the package for analyses
or label printing. Aside from the taxonomy module, none of this has to
be re-ran.</p>
</div>
<div class="section level2">
<h2 id="decide-where-to-store-data">Decide where to store data<a class="anchor" aria-label="anchor" href="#decide-where-to-store-data"></a>
</h2>
<p>BarnebyLives relies on local copies of several large datasets to
minimize API calls and ensure consistent performance. Storage
requirements vary by geographic scope:</p>
<ul>
<li>Regional collections (single state/province): 4-8 GB</li>
<li>Multi-state collections (e.g., Great Plains): 8-12 GB</li>
<li>Continental collections (e.g., Michigan to California): 16+ GB</li>
</ul>
<p>The data persistence approach offers several advantages:</p>
<ul>
<li>Reduced dependency on internet connectivity during analyses</li>
<li>Consistent data versions across analyses</li>
<li>Faster processing compared to repeated API calls</li>
<li>Offline capability for field work</li>
</ul>
<p>It’s important that you decide where BarnebyLives will be installed
on your computer. Below, I will be downloading and copying some of the
data to an external drive mounted to my system, where I have a directory
named ‘BL_sandbox’.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example directory (adjust for your system)</span></span>
<span><span class="va">bl_dir</span> <span class="op">&lt;-</span> <span class="st">"/media/steppe/hdd/BL_sandbox"</span></span></code></pre></div>
<p>Note: All file paths in the pipeline can be specified independently,
allowing you to relocate data after setup without breaking
functionality. So don’t worry if you start an install somewhere you
don’t want the data to end up.</p>
<div class="section level3">
<h3 id="taxonomic-data">Taxonomic Data<a class="anchor" aria-label="anchor" href="#taxonomic-data"></a>
</h3>
<p>BarnebyLives uses the <em>World Checklist of Vascular Plants</em> as
its primary taxonomic backbone. This continuously updated resource from
Kew Gardens provides standardized nomenclature for global plant
diversity and serves as the foundation for <em>Plants of the World
Online (POWO)</em>.</p>
<p>The <code>TaxUnpack</code> function downloads and processes WCVP
data, creating three lookup tables:</p>
<p>Complete species catalog Infraspecific taxa (varieties and
subspecies) Genus-level taxonomy</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## download and process the taxonomic data</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'taxdata'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/wcvp_update.html">wcvp_update</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span> </span>
<span><span class="fu"><a href="../reference/TaxUnpack.html">TaxUnpack</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">p2</span>, bound <span class="op">=</span> <span class="va">bound</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="ipni">IPNI<a class="anchor" aria-label="anchor" href="#ipni"></a>
</h4>
<p>Standard botanical author abbreviations from the International Plant
Names Index (IPNI) ensure consistent citation formatting on specimen
labels.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">'ipni_authors'</span>, package<span class="op">=</span><span class="st">'BarnebyLives'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">ipni_authors</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">p2</span>, <span class="st">'ipni_author_abbreviations.csv'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="download-all-geographic-data">Download all geographic data<a class="anchor" aria-label="anchor" href="#download-all-geographic-data"></a>
</h3>
<div class="section level4">
<h4 id="automated-downloads">Automated downloads<a class="anchor" aria-label="anchor" href="#automated-downloads"></a>
</h4>
<p>The <code>data_download</code> function retrieves most geographic
data sets automatically.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># I am using R markdown so want to be really sure save data to the correct location</span></span>
<span><span class="co"># so I will use an absolute path</span></span>
<span><span class="fu"><a href="../reference/data_download.html">data_download</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'raw'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># if you are using an interactive R script. (fileR) you should be able to do something</span></span>
<span><span class="co"># similar or even just cd into the directory where you want to save everything and </span></span>
<span><span class="co"># run the function ala `download-data()`</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="manual-downloads">Manual downloads<a class="anchor" aria-label="anchor" href="#manual-downloads"></a>
</h3>
<p>Geographic data are organized in tiles following standard
conventions. Define your study area as a bounding box using decimal
degrees (WGS84/EPSG:4326 - default systems in most cartography software
are close enough). Google Maps will work fine for this, just go a few
miles outside of your extent to be sure.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bound</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>   y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">48</span>,  <span class="fl">48</span>,  <span class="fl">41</span>,  <span class="fl">41</span>,  <span class="fl">48</span><span class="op">)</span>,</span>
<span>   x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">91</span>, <span class="op">-</span><span class="fl">82</span>, <span class="op">-</span><span class="fl">82</span>, <span class="op">-</span><span class="fl">91</span>, <span class="op">-</span><span class="fl">91</span><span class="op">)</span></span>
<span> <span class="op">)</span> <span class="co"># note that the 5th pair of coordinates is the same</span></span>
<span><span class="co"># as the first pair (48, -91), this is required to 'close'</span></span>
<span><span class="co"># the square. </span></span>
<span></span>
<span><span class="fu"><a href="../reference/tileSelector.html">tileSelector</a></span><span class="op">(</span><span class="va">bound</span><span class="op">)</span></span></code></pre></div>
<p><code>tile_selector</code> will help you determine which files you
need to download. We will define a geographic extent that covers the
area of interest. It will be a simple square, and grabbing coordinates
from Open Street/Google/Apple Maps etc., or a GIS, will suffice.</p>
<div class="section level4">
<h4 id="manual">manual<a class="anchor" aria-label="anchor" href="#manual"></a>
</h4>
<p>We will download a couple attributes from Geomorpho90m from a <a href="https://opentopography.s3.sdsc.edu/minio/dataspace/OTDS.012020.4326.1/raster/" class="external-link">Minio</a>
page. We need both ‘<em>aspect</em>’ (NOT ‘sine’ or ‘cosine’) and
‘<em>geom</em>’ from here, you should be able to control find
(‘ctrl+’f’) these in their respective directories and manually download
them.<br>
Once the files are downloaded copy them to the same location as you had
<code>data_download</code> save files.</p>
<p>Now we also need to manually download data on elevation from <a href="https://hydro.iis.u-tokyo.ac.jp/~yamadai/MERIT_DEM/" class="external-link">MERIT-DEM</a>.
Yes you technically need to register here, but you will automatically
get a log in password to any email you enter, and it works!</p>
<p>These tiles follow the same naming convention as the previous data
set - in fact Geomorpho90m is derived from MERIT-DEM one. Also save
these files to the location you have <code>data_download</code> save
files.</p>
</div>
</div>
<div class="section level3">
<h3 id="set-up-an-instance-for-use">set up an instance for use<a class="anchor" aria-label="anchor" href="#set-up-an-instance-for-use"></a>
</h3>
<p>You are now ready to set up an instance of BL for analysis.</p>
<p>Specify where the downloaded data are <code>path</code>, where to
save the date <code>pathOut</code>, the square (or bounding box) around
your study area <code>bound</code>, and whether to remove the raw
downloaded files ‘cleanup’. I set <code>cleanup = FALSE</code>, until I
am 100% certain that all downloads are good, which means running data
through the pipeline and printing labels a couple times.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/data_setup.html">data_setup</a></span><span class="op">(</span> <span class="co"># this one will take maybe 30 minutes or so </span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'raw'</span><span class="op">)</span>, </span>
<span>  pathOut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'geo'</span><span class="op">)</span>,</span>
<span>  bound <span class="op">=</span> <span class="va">bound</span>, cleanup <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="finishing-up-">Finishing up.<a class="anchor" aria-label="anchor" href="#finishing-up-"></a>
</h2>
<p>You can check that all files are in place by running `` and you
should be good to go forward</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and you can check that everything has been set up using this. </span></span>
<span><span class="fu"><a href="../reference/check_data_setup_outputs.html">check_data_setup_outputs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'geo'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>And that’s it! After a few runs of the system feel free to delete the
raw data, you can do that by hand, or by initializing the instance using
the <code>data_setup</code> function again. But that kind of seems like
overkill!</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/data_setup.html">data_setup</a></span><span class="op">(</span> <span class="co"># this one will take maybe 30 minutes or so </span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'raw'</span><span class="op">)</span>, </span>
<span>  pathOut <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">bl_dir</span>, <span class="st">'geo'</span><span class="op">)</span>,</span>
<span>  bound <span class="op">=</span> <span class="va">bound</span>, cleanup <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h3>
<p>With your BarnebyLives instance successfully configured, you can
now:</p>
<ul>
<li>Validate taxonomic names against WCVP standards</li>
<li>Extract environmental data for specimen localities</li>
</ul>
<p>Consult the additional BarnebyLives vignettes for analysis workflows
and advanced usage examples.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Reed Clark Benkendorf.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
